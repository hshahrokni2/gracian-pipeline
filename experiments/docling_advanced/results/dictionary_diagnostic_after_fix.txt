2025-10-09 11:48:35,051 - INFO - detected formats: [<InputFormat.PDF: 'pdf'>]
2025-10-09 11:48:35,084 - INFO - Going to convert document batch...
2025-10-09 11:48:35,084 - INFO - Initializing pipeline for StandardPdfPipeline with options hash e647edf348883bed75367b22fbe60347
2025-10-09 11:48:35,088 - INFO - Loading plugin 'docling_defaults'
2025-10-09 11:48:35,089 - INFO - Registered picture descriptions: ['vlm', 'api']
2025-10-09 11:48:35,093 - INFO - Loading plugin 'docling_defaults'
2025-10-09 11:48:35,095 - INFO - Registered ocr engines: ['easyocr', 'ocrmac', 'rapidocr', 'tesserocr', 'tesseract']
2025-10-09 11:48:35,258 - INFO - Accelerator device: 'mps'
2025-10-09 11:48:38,183 - INFO - Accelerator device: 'mps'
2025-10-09 11:48:39,609 - INFO - Accelerator device: 'mps'
2025-10-09 11:48:40,113 - INFO - Processing document brf_268882.pdf
2025-10-09 11:50:33,003 - INFO - Finished converting document brf_268882.pdf in 117.95 sec.
================================================================================
DIAGNOSTIC: Docling Sections vs Dictionary Terms
================================================================================

ðŸ“„ Extracting sections from brf_268882.pdf...

âœ… Docling detected 49 sections
âœ… Docling detected 11 tables

================================================================================
SAMPLE SECTION TITLES (First 20)
================================================================================
 1. [  1-1] VÃ¤lkommen till &rsredovisningen fÃ¶r Brf HagelbÃ¶ssan 1 1 Hjorthagen
 2. [  2-2] Kort till guide
 3. [  2-2] FÃ¶rvaltningsberÃ¤ttelse
 4. [  2-2] ResultatrÃ¤kning
 5. [  2-2] BalansrÃ¤kning
 6. [  2-2] KassaflÃ¶desanalys
 7. [  2-2] Noter
 8. [  2-2] Giltighet
 9. [  3-3] FÃ¶rvaltningsberÃ¤ttelse
10. [  3-3] Verksamheten
11. [  3-3] AllmÃ¤nt om verksamheten
12. [  3-3] Registreringsdatum
13. [  3-3] Ã„kta fÃ¶rening
14. [  3-3] Fastigheten
15. [  3-3] ByggnadsÃ¤r och ytor
16. [  3-3] Styrelsens sammansÃ¤ttning
17. [  4-4] Revisorer
18. [  4-4] Avtal med leverantÃ¶rer
19. [  4-4] Ekonomi
20. [  5-5] Medlemsinformation

================================================================================
DICTIONARY CONFIGURATION
================================================================================

ðŸ“š Dictionary loaded: 31 terms across {'balance_sheet': {'terms': 8, 'synonyms': 27}, 'income_statement': {'terms': 6, 'synonyms': 27}, 'notes': {'terms': 5, 'synonyms': 21}, 'governance': {'terms': 5, 'synonyms': 19}, 'property': {'terms': 7, 'synonyms': 29}} categories

================================================================================
DICTIONARY EXPECTS (Sample Terms by Category)
================================================================================

BALANCE SHEET (8 terms):
  â€¢ N/A                                 (field: N/A)
    Synonyms: tillgangar, summa tillgÃ¥ngar, totala tillgÃ¥ngar
  â€¢ N/A                                 (field: N/A)
    Synonyms: anlaggningstillgangar, anlÃ¤ggningstillgÃ¥ngar, fasta tillgangar
  â€¢ N/A                                 (field: N/A)
    Synonyms: omsattningstillgangar, omsÃ¤ttningstillgÃ¥ngar, kortfristiga tillgangar
  â€¢ N/A                                 (field: N/A)
    Synonyms: summa skulder, totala skulder, skulder och eget kapital
  â€¢ N/A                                 (field: N/A)
    Synonyms: langfristiga skulder, langfristiga lan, lÃ¥ngfristiga lÃ¥n

INCOME STATEMENT (6 terms):
  â€¢ N/A                                 (field: N/A)
    Synonyms: intakter, summa intÃ¤kter, totala intÃ¤kter
  â€¢ N/A                                 (field: N/A)
    Synonyms: arsavgifter, Ã¥rsavgift, avgifter
  â€¢ N/A                                 (field: N/A)
    Synonyms: summa kostnader, totala kostnader, driftskostnader
  â€¢ N/A                                 (field: N/A)
    Synonyms: rorelsekostnader, driftskostnader, driftskostnad
  â€¢ N/A                                 (field: N/A)
    Synonyms: underhallskostnader, underhÃ¥ll, reparationer

GOVERNANCE (5 terms):
  â€¢ N/A                                 (field: N/A)
    Synonyms: styrelseordforande, ordfÃ¶rande, ordforande
  â€¢ N/A                                 (field: N/A)
    Synonyms: styrelseledam, ledamot, ledamoter
  â€¢ N/A                                 (field: N/A)
    Synonyms: auktoriserad revisor, godkÃ¤nd revisor, godkand revisor
  â€¢ N/A                                 (field: N/A)
    Synonyms: revisionsbyra, revisionsfirma, byrÃ¥
  â€¢ N/A                                 (field: N/A)
    Synonyms: valberedningen, nominering

NOTES (5 terms):
  â€¢ N/A                                 (field: N/A)
    Synonyms: avskrivning, avskrivningar av materiella anlÃ¤ggningstillgÃ¥ngar, avskrivning byggnader
  â€¢ N/A                                 (field: N/A)
    Synonyms: byggnader, byggnad och mark, fastighet
  â€¢ N/A                                 (field: N/A)
    Synonyms: fÃ¶rutbetalda kostnader och upplupna intÃ¤kter, forutbetalda kostnader, upplupna intakter
  â€¢ N/A                                 (field: N/A)
    Synonyms: lan, lÃ¥neavtal, lÃ¥nfÃ¶rfall
  â€¢ N/A                                 (field: N/A)
    Synonyms: sakerheter, pantsatta tillgangar, pantsatta tillgÃ¥ngar

================================================================================
MATCH TESTING: Actual Docling Sections -> Dictionary
================================================================================

âŒ MISS #1: 'VÃ¤lkommen till &rsredovisningen fÃ¶r Brf HagelbÃ¶ssan 1 1 Hjorthagen' [1-1] -> NO MATCH

âŒ MISS #2: 'Kort till guide' [2-2] -> NO MATCH

âŒ MISS #3: 'FÃ¶rvaltningsberÃ¤ttelse' [2-2] -> NO MATCH

âŒ MISS #4: 'ResultatrÃ¤kning' [2-2] -> NO MATCH

âŒ MISS #5: 'BalansrÃ¤kning' [2-2] -> NO MATCH

âŒ MISS #6: 'KassaflÃ¶desanalys' [2-2] -> NO MATCH

âŒ MISS #7: 'Noter' [2-2] -> NO MATCH

âŒ MISS #8: 'Giltighet' [2-2] -> NO MATCH

âŒ MISS #9: 'FÃ¶rvaltningsberÃ¤ttelse' [3-3] -> NO MATCH

âŒ MISS #10: 'Verksamheten' [3-3] -> NO MATCH

âŒ MISS #11: 'AllmÃ¤nt om verksamheten' [3-3] -> NO MATCH

âŒ MISS #12: 'Registreringsdatum' [3-3] -> NO MATCH

âŒ MISS #13: 'Ã„kta fÃ¶rening' [3-3] -> NO MATCH

âœ… MATCH #1
   Section: 'Fastigheten' [3-3]
Traceback (most recent call last):
  File "/Users/hosseins/Dropbox/zeldadb/zeldabot/pdf_docs/Gracian Pipeline/experiments/docling_advanced/code/debug_dictionary_matching.py", line 190, in <module>
    main()
  File "/Users/hosseins/Dropbox/zeldadb/zeldabot/pdf_docs/Gracian Pipeline/experiments/docling_advanced/code/debug_dictionary_matching.py", line 88, in main
    print(f"   -> Category: {match.category}, Field: {match.canonical_field}")
                                                      ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'TermMatch' object has no attribute 'canonical_field'. Did you mean: 'canonical_term'?
